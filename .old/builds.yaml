kind: action
name: "integration-tests"
config:
  arguments:
  - name: database
    kind: oneOf
    value: ["postgres", "mysql", "sqlite3"]
---
kind: build
config:
  url: github.com/grafana/grafana
  steps:
    - description: "install yarn dependencies"
      image: node:16
      action:
        - yarn install
      store:
        - path: node_modules/
          ref: grafana-node-modules
          watch:
            - yarn.lock
    - description: "install go dependencies"
      image: golang:1.18
      action:
        - go mod download
      store:
        - path: $GOPATH/pkg/mod
          ref: grafana-go-mod
          watch:
            - go.sum
